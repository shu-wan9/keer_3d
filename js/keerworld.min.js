b4w.register("keerworld_main",function(e,h){function H(){if(null==c.headFile||null==c.bodyFile)return!1;var a=p[c.headName];if(null==a)return!1;var b=q(c.bodyName);return 0<=a.indexOf(b)}function q(a){a=a.replace("-","_");return a=a.replace(".","")}function I(a,b){b?(a.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return!1},a=r.get_assets_path("keerworld"),z?k.load(a+"keerworld_cap.json",A):k.load(a+"keerworld.json",A)):console.log("b4w init failure")}function B(a,b){H()?(a&&k.load(t+
"Head/"+c.headFile,J),u=!a,b&&k.load(t+c.bodyFile,K),v=!b,e.start_load_cb()):e.loaded_cb(!1,!1)}function C(a){for(var b=0;b<a.length;++b){var c=a[b],d=g.get_object_name(c).toLowerCase();0<=d.indexOf("diamond_inside")?w.inherit_material(n,"gem_inside",c,"inside"):0<=d.indexOf("diamond")?w.inherit_material(n,"gem_outside",c,"outside"):w.inherit_material(n,"ring_Platinum",c,"body")}}function J(a,b){if(b){var f=g.get_all_objects("MESH",a);C(f);for(var d=0;d<f.length;++d)if(g.get_object_name(f[d])==c.headName){g.show_object(f[d]);
break}c.headDataID=a;u=!0}if(v){for(d=1;d<a;++d)d!=c.headDataID&&d!=c.bodyDataID&&k.unload(d);e.loaded_cb(b,!0);a=g.get_object_by_name("Camera");l.rotate_camera(a,-Math.PI/3,-Math.PI/2.8,!0)}}function K(a,b){if(b){var f=g.get_all_objects("MESH",a);C(f);for(var d=0;d<f.length;++d)if(g.get_object_name(f[d])==c.bodyName){g.show_object(f[d]);break}c.bodyDataID=a;v=!0}if(u){for(d=1;d<a;++d)d!=c.headDataID&&d!=c.bodyDataID&&k.unload(d);e.loaded_cb(!0,b);a=g.get_object_by_name("Camera");l.rotate_camera(a,-Math.PI/3,-Math.PI/
2.8,!0)}}function A(a,b){b?(n=g.get_object_by_name("MatLib"),D.enable_camera_controls(),x=!0,null!=c.bodyFile&&null!=c.headFile&&B(!0,!0)):console.log("b4w load failure")}var D=h("app"),r=h("config"),k=h("data"),l=h("camera"),g=h("scenes"),w=h("material"),L=h("version"),y=h("main"),M=h("screen"),E=[{A:["A100","A50"]},{B:["B100","B50"]},{C:["C100","C50"]},{D:["D100","D50"]},{E:["E100","E50"]},{F:["F100","F50"]},{G:["G100","G50"]},{H:["H100","H50"]},{J:["J100","J50"]},{K:["K100","K50"]},{I:["I100",
"I50"]},{M:["M100","M50"]},{N:["N100","N50"]},{O:["O100","O50"]},{P:["P100","P50"]},{Q:["Q100","Q50"]},{R:["R100","R50"]},{T:["T100","T50"]},{U:["U100","U50"]},{V:["V100","V50"]},{"01":["A1_A21"]},{"02":["A1_B21"]},{"03":["A1_C18"]},{"04":["A1_D21"]},{"05":["A1_D24"]},{"06":["A1_E24"]},{"07":["A1_F24"]},{"08":["A1_G24"]},{"09":["A1_H24"]},{10:["A1_J"]},{"01":["A3_A21"]},{"02":["A3_A24"]},{"03":["A3_A27"]},{"04":["A3_B21"]},{"05":["A3_B24"]},{"06":["A3_B27"]},{"07":["A3_C15"]},{"08":["A3_C18"]},{"09":["A3_C21"]},
{10:["A3_C24"]},{11:["A3_D21"]},{12:["A3_D24"]},{13:["A3_E21"]},{14:["A3_E24"]},{15:["A3_E27"]},{16:["A3_F21"]},{17:["A3_F24"]},{18:["A3_F27"]},{19:["A3_G18"]},{20:["A3_G21"]},{21:["A3_G24"]},{22:["A3_H21"]},{23:["A3_H24"]},{24:["A3_I"]},{25:["A3_J"]},{"01":["A5_A24"]},{"02":["A5_A27"]},{"03":["A5_B24"]},{"04":["A5_B27"]},{"05":["A5_C18"]},{"06":["A5_C21"]},{"07":["A5_D24"]},{"08":["A5_E24"]},{"09":["A5_E27"]},{10:["A5_F24"]},{11:["A5_F27"]},{12:["A5_G21"]},{13:["A5_G24"]},{14:["A5_H21"]},{15:["A5_H24"]},
{16:["A5_I"]},{17:["A5_J"]},{"01":["A6_A27"]},{"02":["A6_B27"]},{"03":["A6_C21"]},{"04":["A6_D24"]},{"05":["A6_E27"]},{"06":["A6_F27"]},{"07":["A6_G21"]},{"08":["A6_H24"]},{"09":["A6_I"]},{10:["A6_J"]},{"01":["A7_A27"]},{"02":["A7_B27"]},{"03":["A7_D24"]},{"04":["A7_E27"]},{"05":["A7_F27"]},{"06":["A7_G24"]},{"07":["A7_H24"]},{"08":["A7_I"]},{"09":["A7_J"]}],m={},p={A50:"A1-H2.4 A1-C1.8 A1-B2.1 A1-G2.4 A1-D2.1 A1-A2.1 A1-F2.4 A1-J A1-E2.4".split(" "),B50:"A1-H2.4 A1-C1.8 A1-B2.1 A1-G2.4 A1-D2.1 A1-A2.1 A1-F2.4 A1-J A1-E2.4".split(" "),
C50:"A1-C1.8 A1-B2.1 A1-A2.1 A1-G2.4 A1-H2.4 A1-E2.4 A1-J A1-F2.4 A1-D2.4".split(" "),D50:"A1-C1.8 A1-B2.1 A1-A2.1 A1-G2.4 A1-H2.4 A1-E2.4 A1-J A1-F2.4 A1-D2.4".split(" "),T50:"A6-B2.7 A6-A2.7 A6-E2.7 A6-F2.7 A6-I A6-J A6-D2.4 A6-G2.1 A6-H2.4 A6-C2.1".split(" "),V50:"A6-B2.7 A6-A2.7 A6-E2.7 A6-F2.7 A6-I A6-J A6-D2.4 A6-G2.1 A6-H2.4 A6-C2.1".split(" "),G50:"A3-I A3-J A3-E2.1 A3-F2.4 A3-G2.1 A3-H2.4 A3-A2.1 A3-B2.1 A3-D2.1 A3-C1.8".split(" "),R50:"A3-J A3-I A3-H2.4 A3-C2.1 A3-D2.4 A3-B2.1 A3-A2.1 A3-G2.1 A3-F2.7 A3-E2.7".split(" "),
F50:"A3-J A3-I A3-H2.4 A3-G2.1 A3-A2.4 A3-E2.4 A3-F2.4 A3-B2.4 A3-D2.4 A3-C2.4".split(" "),Q50:"A3-I A3-J A3-C2.1 A3-D2.1 A3-G2.1 A3-H2.4 A3-A2.4 A3-B2.4 A3-F2.1 A3-E2.1".split(" "),P50:"A3-I A3-J A3-C2.1 A3-D2.1 A3-G2.1 A3-H2.4 A3-A2.4 A3-B2.4 A3-F2.1 A3-E2.1".split(" "),E50:"A3-I A3-J A3-C2.1 A3-D2.1 A3-A2.4 A3-B2.4 A3-G2.1 A3-F2.4 A3-E2.4 A3-H2.4".split(" "),J50:"A3-I A3-J A3-G1.8 A3-C1.5 A3-A2.1 A3-B2.1 A3-H2.1 A3-D2.1 A3-E2.4 A3-F2.4".split(" "),N50:"A3-I A3-J A3-G1.8 A3-C1.5 A3-A2.1 A3-B2.1 A3-H2.1 A3-D2.1 A3-E2.4 A3-F2.4".split(" "),
K50:"A3-I A3-J A3-G1.8 A3-C1.5 A3-A2.1 A3-B2.1 A3-H2.1 A3-D2.1 A3-E2.4 A3-F2.4".split(" "),O50:"A3-I A3-J A3-G1.8 A3-C1.5 A3-A2.1 A3-B2.1 A3-H2.1 A3-D2.1 A3-E2.4 A3-F2.4".split(" "),U50:"A3-I A5-J A5-G2.4 A5-A2.7 A5-B2.7 A5-D2.4 A5-C2.1 A5-H2.4 A5-F2.7 A5-E2.7".split(" "),M50:"A3-I A3-J A3-G2.1 A3-B2.4 A3-A2.4 A3-H2.4 A3-D2.4 A3-C2.1 A3-E2.4 A3-F2.4".split(" "),I50:"A3-I A3-J A3-G2.1 A5-B2.4 A5-A2.4 A3-H2.4 A5-D2.4 A5-C2.1 A5-E2.4 A5-F2.4".split(" "),H50:"A3-I A5-J A5-G2.1 A5-H2.1 A5-C1.8 A5-D2.4 A5-B2.4 A5-A2.4 A5-E2.4 A5-F2.4".split(" "),
V100:"A7-I A7-J A7-E2.7 A7-F2.7 A7-B2.7 A7-A2.7 A7-D2.4 A7-H2.4 A7-C2.1 A7-G2.4".split(" "),T100:"A7-I A7-J A7-E2.7 A7-F2.7 A7-B2.7 A7-A2.7 A7-D2.4 A7-H2.4 A7-C2.1 A7-G2.4".split(" "),U100:"A6-B2.7 A6-A2.7 A6-E2.7 A6-F2.7 A6-I A6-J A6-D2.4 A6-G2.1 A6-H2.4 A6-C2.1".split(" "),G100:"A6-B2.7 A6-A2.7 A6-E2.7 A6-F2.7 A6-I A6-J A6-D2.4 A6-G2.1 A6-H2.4 A6-C2.1".split(" "),H100:"A6-B2.7 A6-A2.7 A6-E2.7 A6-F2.7 A6-I A6-J A6-D2.4 A6-G2.1 A6-H2.4 A6-C2.1".split(" "),D100:"A3-I A3-J A3-F2.7 A3-E2.7 A3-A2.7 A3-B2.7 A3-H2.4 A3-C2.1 A3-G2.4 A3-D2.4".split(" "),
C100:"A3-I A3-J A3-F2.7 A3-E2.7 A3-A2.7 A3-B2.7 A3-H2.4 A3-C2.1 A3-G2.4 A3-D2.4".split(" "),A100:"A3-I A3-J A3-F2.7 A3-E2.7 A3-A2.7 A3-B2.7 A3-H2.4 A3-C2.1 A3-G2.4 A3-D2.4".split(" "),B100:"A3-I A3-J A3-F2.7 A3-E2.7 A3-A2.7 A3-B2.7 A3-H2.4 A3-C2.1 A3-G2.4 A3-D2.4".split(" "),I100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),J100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),O100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),
M100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),K100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),N100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),F100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),E100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),R100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),
Q100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),P100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" ")},c={headName:"",headObj:null,headFile:"",headDataID:-1,bodyName:"",bodyFile:"",bodyObj:null,bodyDataID:-1},F="DEBUG"==L.type(),G=h("camera_anim"),t=r.get_assets_path("keerworld"),x=!1,z=!1,u=!1,v=!1,n;e.Init=function(a,b,c){console.log("Init");z=b;null!=c&&(t=c);for(b=0;b<E.length;++b){var d=E[b];for(e in d){c=d[e];for(var f=
0;f<c.length;++f)m[c[f]]=e}}for(d in p){var e=p[d];for(b=0;b<e.length;++b)e[b]=q(e[b])}x=!1;r.set("canvas_resolution_factor",2);D.init({canvas_container_id:a,callback:I,show_fps:F,console_verbose:F,autoresize:!0})};e.Reset=function(){console.log("Reset");y.reset();c={headName:"",headObj:null,headFile:"",headDataID:-1,bodyName:"",bodyFile:"",bodyObj:null,bodyDataID:-1}};e.Load=function(a,b){console.log("Load");b=q(b);if(x){var f=!1,d=!1;c.bodyName!=b&&(c.bodyName=b,c.bodyFile=b.substr(0,2)+"/"+m[b]+".json",
d=!0);c.headName!=a&&(b=m[a],c.headName=a,c.headFile=b+".json",f=!0);return f||d?B(f,d):!0}c.bodyName=b;c.bodyFile=b.substr(0,2)+"/"+m[b]+".json";c.headName=a;c.headFile=m[a]+".json"};e.ToggleRotation=function(){console.log("ToggleRotation");G.auto_rotate(.3)};e.IsAutoRotate=function(){console.log("IsAutoRotate");return G.is_auto_rotate()};e.SetCameraAndShot=function(a,c){console.log("SetCameraAndShot");var b=g.get_object_by_name("Camera"),d=g.get_object_by_name("Plane");g.hide_object(d);0==a?l.rotate_camera(b,.2,0,!0):1==a?l.rotate_camera(b,
0,-Math.PI/2,!0):2==a?l.rotate_camera(b,Math.PI/4,-Math.PI/4,!0):3==a&&l.rotate_camera(b,-Math.PI/3,-Math.PI/2.8,!0);M.shot(c)};e.Pause=function(){console.log("Pause");-1!=c.headDataID&&(k.unload(c.headDataID),c.headDataID=-1);-1!=c.bodyDataID&&(k.unload(c.bodyDataID),c.bodyDataID=-1);c={headName:"",headObj:null,headFile:"",headDataID:-1,bodyName:"",bodyFile:"",bodyObj:null,bodyDataID:-1};y.pause()};e.Resume=function(){console.log("Resume");y.resume()};e.start_load_cb=function(){console.log("start_load_cb")};e.loaded_cb=function(a,
b){console.log("loaded_cb"+a+b)}});var KEER_Main = b4w.require("keerworld_main");
