b4w.register("keerworld_canvas2",function(e,h){function G(){if(null==a.headFile||null==a.bodyFile)return!1;var c=p[a.headName];if(null==c)return!1;var b=q(a.bodyName);return 0<=c.indexOf(b)}function q(c){c=c.replace("-","_");return c=c.replace(".","")}function H(c,b){b?(c.oncontextmenu=function(b){b.preventDefault();b.stopPropagation();return!1},c=x.get_assets_path("keerworld"),y?k.load(c+"keerworld_cap.json",z):k.load(c+"keerworld.json",z)):console.log("b4w init failure")}function A(c,b){G()?(c&&k.load(r+
"Head/"+a.headFile,I),b&&k.load(r+a.bodyFile,J),t=!b,e.start_load_cb()):e.loaded_cb(!1,!1)}function B(c){for(var b=0;b<c.length;++b){var a=c[b],d=g.get_object_name(a).toLowerCase();0<=d.indexOf("diamond_inside")?u.inherit_material(n,"gem_inside",a,"inside"):0<=d.indexOf("diamond")?u.inherit_material(n,"gem_outside",a,"outside"):u.inherit_material(n,"ring_Platinum",a,"body")}}function I(c,b){if(b){var f=g.get_all_objects("MESH",c);B(f);for(var d=0;d<f.length;++d)if(g.get_object_name(f[d])==a.headName){g.show_object(f[d]);
break}-1!=a.headDataID&&k.unload(a.headDataID);a.headDataID=c}t&&(e.loaded_cb(b,!0),c=g.get_object_by_name("Camera"),l.rotate_camera(c,-Math.PI/3,-Math.PI/2.8,!0))}function J(c,b){if(b){var f=g.get_all_objects("MESH",c);B(f);for(var d=0;d<f.length;++d)if(g.get_object_name(f[d])==a.bodyName){g.show_object(f[d]);break}-1!=a.bodyDataID&&k.unload(a.bodyDataID);a.bodyDataID=c;t=!0}e.loaded_cb(!0,b);c=g.get_object_by_name("Camera");l.rotate_camera(c,-Math.PI/3,-Math.PI/2.8,!0)}function z(c,b){b?(n=g.get_object_by_name("MatLib"),
C.enable_camera_controls(),v=!0,null!=a.bodyFile&&null!=a.headFile&&A(!0,!0)):console.log("b4w load failure")}var C=h("app"),x=h("config"),k=h("data"),l=h("camera"),g=h("scenes"),u=h("material"),K=h("version"),w=h("main"),L=h("screen"),D=[{A:["A100","A50"]},{B:["B100","B50"]},{C:["C100","C50"]},{D:["D100","D50"]},{E:["E100","E50"]},{F:["F100","F50"]},{G:["G100","G50"]},{H:["H100","H50"]},{J:["J100","J50"]},{K:["K100","K50"]},{I:["I100","I50"]},{M:["M100","M50"]},{N:["N100","N50"]},{O:["O100","O50"]},
{P:["P100","P50"]},{Q:["Q100","Q50"]},{R:["R100","R50"]},{T:["T100","T50"]},{U:["U100","U50"]},{V:["V100","V50"]},{"01":["A1_A21"]},{"02":["A1_B21"]},{"03":["A1_C18"]},{"04":["A1_D21"]},{"05":["A1_D24"]},{"06":["A1_E24"]},{"07":["A1_F24"]},{"08":["A1_G24"]},{"09":["A1_H24"]},{10:["A1_J"]},{"01":["A3_A21"]},{"02":["A3_A24"]},{"03":["A3_A27"]},{"04":["A3_B21"]},{"05":["A3_B24"]},{"06":["A3_B27"]},{"07":["A3_C15"]},{"08":["A3_C18"]},{"09":["A3_C21"]},{10:["A3_C24"]},{11:["A3_D21"]},{12:["A3_D24"]},{13:["A3_E21"]},
{14:["A3_E24"]},{15:["A3_E27"]},{16:["A3_F21"]},{17:["A3_F24"]},{18:["A3_F27"]},{19:["A3_G18"]},{20:["A3_G21"]},{21:["A3_G24"]},{22:["A3_H21"]},{23:["A3_H24"]},{24:["A3_I"]},{25:["A3_J"]},{"01":["A5_A24"]},{"02":["A5_A27"]},{"03":["A5_B24"]},{"04":["A5_B27"]},{"05":["A5_C18"]},{"06":["A5_C21"]},{"07":["A5_D24"]},{"08":["A5_E24"]},{"09":["A5_E27"]},{10:["A5_F24"]},{11:["A5_F27"]},{12:["A5_G21"]},{13:["A5_G24"]},{14:["A5_H21"]},{15:["A5_H24"]},{16:["A5_I"]},{17:["A5_J"]},{"01":["A6_A27"]},{"02":["A6_B27"]},
{"03":["A6_C21"]},{"04":["A6_D24"]},{"05":["A6_E27"]},{"06":["A6_F27"]},{"07":["A6_G21"]},{"08":["A6_H24"]},{"09":["A6_I"]},{10:["A6_J"]},{"01":["A7_A27"]},{"02":["A7_B27"]},{"03":["A7_D24"]},{"04":["A7_E27"]},{"05":["A7_F27"]},{"06":["A7_G24"]},{"07":["A7_H24"]},{"08":["A7_I"]},{"09":["A7_J"]}],m={},p={A50:"A1-H2.4 A1-C1.8 A1-B2.1 A1-G2.4 A1-D2.1 A1-A2.1 A1-F2.4 A1-J A1-E2.4".split(" "),B50:"A1-H2.4 A1-C1.8 A1-B2.1 A1-G2.4 A1-D2.1 A1-A2.1 A1-F2.4 A1-J A1-E2.4".split(" "),C50:"A1-C1.8 A1-B2.1 A1-A2.1 A1-G2.4 A1-H2.4 A1-E2.4 A1-J A1-F2.4 A1-D2.4".split(" "),
D50:"A1-C1.8 A1-B2.1 A1-A2.1 A1-G2.4 A1-H2.4 A1-E2.4 A1-J A1-F2.4 A1-D2.4".split(" "),T50:"A6-B2.7 A6-A2.7 A6-E2.7 A6-F2.7 A6-I A6-J A6-D2.4 A6-G2.1 A6-H2.4 A6-C2.1".split(" "),V50:"A6-B2.7 A6-A2.7 A6-E2.7 A6-F2.7 A6-I A6-J A6-D2.4 A6-G2.1 A6-H2.4 A6-C2.1".split(" "),G50:"A3-I A3-J A3-E2.1 A3-F2.4 A3-G2.1 A3-H2.4 A3-A2.1 A3-B2.1 A3-D2.1 A3-C1.8".split(" "),R50:"A3-J A3-I A3-H2.4 A3-C2.1 A3-D2.4 A3-B2.1 A3-A2.1 A3-G2.1 A3-F2.7 A3-E2.7".split(" "),F50:"A3-J A3-I A3-H2.4 A3-G2.1 A3-A2.4 A3-E2.4 A3-F2.4 A3-B2.4 A3-D2.4 A3-C2.4".split(" "),
Q50:"A3-I A3-J A3-C2.1 A3-D2.1 A3-G2.1 A3-H2.4 A3-A2.4 A3-B2.4 A3-F2.1 A3-E2.1".split(" "),P50:"A3-I A3-J A3-C2.1 A3-D2.1 A3-G2.1 A3-H2.4 A3-A2.4 A3-B2.4 A3-F2.1 A3-E2.1".split(" "),E50:"A3-I A3-J A3-C2.1 A3-D2.1 A3-A2.4 A3-B2.4 A3-G2.1 A3-F2.4 A3-E2.4 A3-H2.4".split(" "),J50:"A3-I A3-J A3-G1.8 A3-C1.5 A3-A2.1 A3-B2.1 A3-H2.1 A3-D2.1 A3-E2.4 A3-F2.4".split(" "),N50:"A3-I A3-J A3-G1.8 A3-C1.5 A3-A2.1 A3-B2.1 A3-H2.1 A3-D2.1 A3-E2.4 A3-F2.4".split(" "),K50:"A3-I A3-J A3-G1.8 A3-C1.5 A3-A2.1 A3-B2.1 A3-H2.1 A3-D2.1 A3-E2.4 A3-F2.4".split(" "),
O50:"A3-I A3-J A3-G1.8 A3-C1.5 A3-A2.1 A3-B2.1 A3-H2.1 A3-D2.1 A3-E2.4 A3-F2.4".split(" "),U50:"A5-I A5-J A5-G2.4 A5-A2.7 A5-B2.7 A5-D2.4 A5-C2.1 A5-H2.4 A5-F2.7 A5-E2.7".split(" "),M50:"A5-I A5-J A5-G2.1 A5-B2.4 A5-A2.4 A5-H2.4 A5-D2.4 A5-C2.1 A5-E2.4 A5-F2.4".split(" "),I50:"A5-I A5-J A5-G2.1 A5-B2.4 A5-A2.4 A5-H2.4 A5-D2.4 A5-C2.1 A5-E2.4 A5-F2.4".split(" "),H50:"A5-I A5-J A5-G2.1 A5-H2.1 A5-C1.8 A5-D2.4 A5-B2.4 A5-A2.4 A5-E2.4 A5-F2.4".split(" "),V100:"A7-I A7-J A7-E2.7 A7-F2.7 A7-B2.7 A7-A2.7 A7-D2.4 A7-H2.4 A7-C2.1 A7-G2.4".split(" "),
T100:"A7-I A7-J A7-E2.7 A7-F2.7 A7-B2.7 A7-A2.7 A7-D2.4 A7-H2.4 A7-C2.1 A7-G2.4".split(" "),U100:"A6-B2.7 A6-A2.7 A6-E2.7 A6-F2.7 A6-I A6-J A6-D2.4 A6-G2.1 A6-H2.4 A6-C2.1".split(" "),G100:"A6-B2.7 A6-A2.7 A6-E2.7 A6-F2.7 A6-I A6-J A6-D2.4 A6-G2.1 A6-H2.4 A6-C2.1".split(" "),H100:"A6-B2.7 A6-A2.7 A6-E2.7 A6-F2.7 A6-I A6-J A6-D2.4 A6-G2.1 A6-H2.4 A6-C2.1".split(" "),D100:"A3-I A3-J A3-F2.7 A3-E2.7 A3-A2.7 A3-B2.7 A3-H2.4 A3-C2.1 A3-G2.4 A3-D2.4".split(" "),C100:"A3-I A3-J A3-F2.7 A3-E2.7 A3-A2.7 A3-B2.7 A3-H2.4 A3-C2.1 A3-G2.4 A3-D2.4".split(" "),
A100:"A3-I A3-J A3-F2.7 A3-E2.7 A3-A2.7 A3-B2.7 A3-H2.4 A3-C2.1 A3-G2.4 A3-D2.4".split(" "),B100:"A3-I A3-J A3-F2.7 A3-E2.7 A3-A2.7 A3-B2.7 A3-H2.4 A3-C2.1 A3-G2.4 A3-D2.4".split(" "),I100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),J100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),O100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),M100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),
K100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),N100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),F100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),E100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),R100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),Q100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" "),
P100:"A5-I A5-J A5-B2.7 A5-H2.4 A5-A2.7 A5-C2.1 A5-D2.4 A6-E2.7 A5-F2.7 A5-G2.4".split(" ")},a={headName:"",headObj:null,headFile:"",headDataID:-1,bodyName:"",bodyFile:"",bodyObj:null,bodyDataID:-1},E="DEBUG"==K.type(),F=h("camera_anim"),r=x.get_assets_path("keerworld"),v=!1,y=!1,t=!1,n;e.Init=function(c,b,a){console.log("Init");y=b;null!=a&&(r=a);for(b=0;b<D.length;++b){var d=D[b];for(e in d){a=d[e];for(var f=0;f<a.length;++f)m[a[f]]=e}}for(d in p){var e=p[d];for(b=0;b<e.length;++b)e[b]=q(e[b])}v=!1;
C.init({canvas_container_id:c,callback:H,show_fps:E,console_verbose:E,autoresize:!0})};e.Reset=function(){console.log("Reset");w.reset();a={headName:"",headObj:null,headFile:"",headDataID:-1,bodyName:"",bodyFile:"",bodyObj:null,bodyDataID:-1}};e.Load=function(c,b){console.log("Load");b=q(b);if(v){var f=!1,d=!1;a.bodyName!=b&&(a.bodyName=b,a.bodyFile=b.substr(0,2)+"/"+m[b]+".json",d=!0);a.headName!=c&&(b=m[c],a.headName=c,a.headFile=b+".json",f=!0);return f||d?A(f,d):!0}a.bodyName=b;a.bodyFile=b.substr(0,
2)+"/"+m[b]+".json";a.headName=c;a.headFile=m[c]+".json"};e.ToggleRotation=function(){console.log("ToggleRotation");F.auto_rotate(.3)};e.IsAutoRotate=function(){console.log("IsAutoRotate");return F.is_auto_rotate()};e.SetCameraAndShot=function(a,b){console.log("SetCameraAndShot");var c=g.get_object_by_name("Camera"),d=g.get_object_by_name("Plane");g.hide_object(d);0==a?l.rotate_camera(c,.2,0,!0):1==a?l.rotate_camera(c,0,-Math.PI/2,!0):2==a?l.rotate_camera(c,Math.PI/4,-Math.PI/4,!0):3==a&&l.rotate_camera(c,-Math.PI/3,-Math.PI/2.8,!0);L.shot(b)};
e.Pause=function(){console.log("Pause");-1!=a.headDataID&&(k.unload(a.headDataID),a.headDataID=-1);-1!=a.bodyDataID&&(k.unload(a.bodyDataID),a.headDataID=-1);a={headName:"",headObj:null,headFile:"",headDataID:-1,bodyName:"",bodyFile:"",bodyObj:null,bodyDataID:-1};w.pause()};e.Resume=function(){console.log("Resume");w.resume()};e.start_load_cb=function(){console.log("start_load_cb")};e.loaded_cb=function(a,b){console.log("loaded_cb"+a+b)}});var KEER_Main2 = b4w.require("keerworld_canvas2");
